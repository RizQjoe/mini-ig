<!DOCTYPE html>
<html class="no-js">
<head>
    <meta charset="utf-8">
    <title>Project week 6</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">

    <link href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet">

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/normalize.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/templatemo_misc.css">
    <link rel="stylesheet" href="css/templatemo_style.css">

    <script src="js/vendor/modernizr-2.6.2.min.js"></script>
    <script src="js/vendor/vue.js"></script>
    <script src="js/vendor/axios.min.js"></script>
    <script src="js/vendor/jquery-1.10.1.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.1.min.js"><\/script>')</script>
    <script src="js/imgLiquid.js"></script>
    <script src="js/fbsdk.js" charset="utf-8"></script>

</head>
<body>
  <div id="app">

    <div id="front">
        <div class="site-header">
            <div class="container">
                <div class="row">
                    <div class="col-md-4 col-sm-6 col-xs-6">
                        <div id="templatemo_logo">
                            <h1><a href="#"> Mini-Ig</a></h1>
                        </div> <!-- /.logo -->
                    </div> <!-- /.col-md-4 -->
                    <div class="col-md-8 col-sm-6 col-xs-6">
                        <a href="#" class="toggle-menu"><i class="fa fa-bars"></i></a>
                        <div class="main-menu">
                            <ul>
                                <li><a href="#front">Home</a></li>
                                <li><a href="#products">Other</a></li>
                                <li><a href="#services">Upload</a></li>
                            </ul>
                        </div> <!-- /.main-menu -->
                    </div> <!-- /.col-md-8 -->
                </div> <!-- /.row -->
                <div class="row">
                    <div class="col-md-12">
                        <div class="responsive">
                            <div class="main-menu">
                                <ul>
                                  <li><a href="#front">Home</a></li>
                                  <li><a href="#products">Other</a></li>
                                  <li><a href="#services">Upload</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div> <!-- /.container -->
        </div> <!-- /.site-header -->
    </div> <!-- /#front -->

    <div class="site-slider">
        <ul class="bxslider">
          <component-home-1 v-for="(gambar, index) in imagesliders" v-bind:propslider="gambar" v-bind:key="index" />
        </ul> <!-- /.bxslider -->
        <div class="bx-thumbnail-wrapper">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div id="bx-pager">
                            <component-home-2 v-for="(tumb, index) in imagesliders" v-bind:proptumb="tumb" v-bind:key="index" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> <!-- /.site-slider -->

    <div id="products" class="content-section">
        <div class="container">
            <div class="row">
                <div class="col-md-12 text-center">
                    <h1 class="section-title">Status {{user}}</h1>
                </div> <!-- /.col-md-12 -->
            </div> <!-- /.row -->
            <div class="row">
                  <component-list-1 v-for="(listimage, index) in images" v-bind:proplist="listimage" v-bind:key="index" @isidataFromList="setDataFromDetil"/>
            </div> <!-- /.row -->
        </div> <!-- /.container -->
    </div> <!-- /#products -->

    <div id="services" class="content-section">
      <div class="container">
            <div class="row">
                <div class="col-md-12 text-center">
                    <h1 class="section-title">Upload</h1>
                </div> <!-- /.col-md-12 -->
            </div>
            <div class="row">
              <div class="col-md-6 col-sm-6">
                  <div class="row contact-form">
                      <form id="uploadForm"
                         enctype="multipart/form-data"
                         action="http://localhost:3000/upload"
                         method="post">

                      <input type="hidden" name="token" value="" />
                      <fieldset class="col-md-6 col-sm-6">
                          <input type="file" name="image" placeholder="file gambar"/>
                      </fieldset>
                      <fieldset class="col-md-12">
                          <textarea name="comments" id="comments" placeholder="Message"></textarea>
                      </fieldset>
                      <fieldset class="col-md-12">
                        <input type="submit" value="Upload Image" name="submit">
                        <span id = "status"></span>
                      </fieldset>
                      </form>
                  </div> <!-- /.contact-form -->
              </div> <!-- /.col-md-6 -->
            </div> <!-- /.row -->
        </div> <!-- /.container -->
    </div> <!-- /#services -->

    <div class="site-footer">
        <div class="container">
            <div class="row">
                <div class="col-md-8 col-sm-6">
                    <span id="copyright">
                    	Copyright &copy; 2017 <a href="#">Kit-Fox</a>
                    </span>

            </div> <!-- /.col-md-6 -->
                <div class="col-md-4 col-sm-6">
                    <ul class="social">
                        <li><a href="#" class="fa fa-facebook"></a></li>
                        <li><a href="#" class="fa fa-twitter"></a></li>
                        <li><a href="#" class="fa fa-instagram"></a></li>
                        <li><a href="#" class="fa fa-linkedin"></a></li>
                        <li><a href="#" class="fa fa-rss"></a></li>
                    </ul>
                </div> <!-- /.col-md-6 -->
            </div> <!-- /.row -->
        </div> <!-- /.container -->
    </div> <!-- /.site-footer -->

<img id="myImage" src="" />


  </div>
    <script>
      Vue.component('component-home-1', {
        template: `
          <li>
              <img v-bind:src="propslider.img" alt="" class="imgLiquid" style="width:1500px; height:660px;">
              <div class="container">
                  <div class="row">
                      <div class="col-md-12 text-right">
                          <div class="slider-caption">
                              <div class="col-md-12 text-right">
                              <span><em class="text-muted">{{propslider.tgl}}</em></span>
                              </div>
                              <h3>{{propslider.desc}}</h3>
                          </div>
                      </div>
                  </div>
              </div>
          </li>
        `,
        props: ['propslider']
      })

      Vue.component('component-home-2', {
        template: `
            <a v-bind:data-slide-index="proptumb.id" href="">
                  <img v-bind:src="proptumb.img" alt="" class="imgLiquid" style="width:170px; height:80px;"/>
            </a>
        `,
        props: ['proptumb']
      })

      Vue.component('component-list-1', {
        template: `
        <div class="row">
          <div class="col-md-6 col-sm-12">
              <div class="product-item">
                  <div class="item-thumb">
                      <img v-bind:src="proplist.img" class="imgLiquid" style="width:600px; height:300px; alt="">
                  </div> <!-- /.item-thumb -->

              </div> <!-- /.product-item -->
          </div> <!-- /.col-md-3 -->

          <div class="col-md-6 col-sm-12">
            <div class="product-item">
              <h3>{{proplist.user}}</h3>
              <span><em class="text-muted">{{proplist.desc}}</em></span>
            </div>
          </div>
          </div>
        `,
        props: ['proplist'],
        methods: {
          setDataKeParent() {
            this.$emit('isidataFromList', this.proplist)
          }
        }
      })

      new Vue({
        el: '#app',
        data: {
          message: 'Hello Kit',
          user: 'Noor Achmadi',
          objimage:{},
          imagesliders:[{id:0, img:'http://127.0.0.1:8080/images/slider/slide1.jpg',desc:'Your HTML5 Website asdasdasd asdasdasda asdasd asdasd asdasdasdas',tgl:'Senin: 23 April 2017'}],
          images:[]

          // imagesliders:[
          //   {id:0, img:'http://127.0.0.1:8080/images/slider/slide1.jpg',desc:'Your HTML5 Website asdasdasd asdasdasda asdasd asdasd asdasdasdas',tgl:'Senin: 23 April 2017'},
          //   {id:1, img:'http://127.0.0.1:8080/images/slider/slide2.jpg',desc:'Your HTML5 Website',tgl:'Senin: 23 April 2017'},
          //   {id:2, img:'http://127.0.0.1:8080/images/slider/slide3.jpg',desc:'Your HTML5 Website',tgl:'Senin: 23 April 2017'},
          //   {id:3, img:'http://127.0.0.1:8080/images/slider/slide4.jpg',desc:'Your HTML5 Website',tgl:'Senin: 23 April 2017'},
          //   {id:4, img:'http://127.0.0.1:8080/images/slider/slide5.jpg',desc:'Your HTML5 Website',tgl:'Senin: 23 April 2017'}
          // ],
          // images:[
          //   {id:0, img:'http://127.0.0.1:8080/images/slider/slide1.jpg',desc:'Your HTML5 Website',tgl:'Senin: 23 April 2017',user:'noer'},
          //   {id:1, img:'http://127.0.0.1:8080/images/slider/slide2.jpg',desc:'Your HTML5 Website',tgl:'Senin: 23 April 2017',user:'noer'},
          //   {id:2, img:'http://127.0.0.1:8080/images/slider/slide3.jpg',desc:'Your HTML5 Website',tgl:'Senin: 23 April 2017',user:'noer'},
          //   {id:3, img:'http://127.0.0.1:8080/images/slider/slide4.jpg',desc:'Your HTML5 Website',tgl:'Senin: 23 April 2017',user:'noer'},
          //   {id:4, img:'http://127.0.0.1:8080/images/slider/slide5.jpg',desc:'Your HTML5 Website',tgl:'Senin: 23 April 2017',user:'noer'},
          //   {id:5, img:'http://127.0.0.1:8080/images/slider/slide1.jpg',desc:'Your HTML5 Website',tgl:'Senin: 23 April 2017',user:'noer'},
          //   {id:6, img:'http://127.0.0.1:8080/images/slider/slide2.jpg',desc:'Your HTML5 Website',tgl:'Senin: 23 April 2017',user:'noer'},
          //   {id:7, img:'http://127.0.0.1:8080/images/slider/slide3.jpg',desc:'Your HTML5 Website',tgl:'Senin: 23 April 2017',user:'noer'},
          //   {id:8, img:'http://127.0.0.1:8080/images/slider/slide4.jpg',desc:'Your HTML5 Website',tgl:'Senin: 23 April 2017',user:'noer'},
          //   {id:9, img:'http://127.0.0.1:8080/images/slider/slide5.jpg',desc:'Your HTML5 Website',tgl:'Senin: 23 April 2017',user:'noer'}
          // ]
        },
        methods: {
          getAtivitas () {
            axios.get('http://localhost:3000/aktivitas')
            .then(response => {
              //console.log(response.data);
              for (var i = 0; i < response.data.length; i++) {
                objimage={};
                objimage["id"]= i;
                objimage["img"]=response.data[i].link1;
                objimage["desc"]=response.data[i].description;
                objimage["tgl"]=response.data[i].createdAt;
                console.log(objimage);
                if(i<4){
                   if(i!=0){
                     this.imagesliders.push(objimage);
                   }
                }
                 this.images.push(objimage);
              }
              //this.articles = response.data.articles
            })
            .catch(err => console.log(err))
          },
          setDataFromDetil (objimg) {
            this.objimage = objimg
          }
        },
        //saat pertama halaman di load get data films dulu
        created () {
          this.getAtivitas()
        }
      })

    </script>

    <script src="js/jquery.easing-1.3.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/plugins.js"></script>
    <script src="js/main.js"></script>

    <script>
       $(document).ready(function() {
         $('#uploadForm').submit(function() {
            //$("accesstoken").val(localStorage.getItem('fbaccesstoken'))
            $("#status").empty().text("File is uploading...");
            $(this).ajaxSubmit({
                error: function(xhr) {
                        status('Error: ' + xhr.status);
                },
                success: function(response) {
                        $("#status").empty().text(response);
                        $('#myImage').attr('src', response.link);
                        console.log(response);
                }
            });
            //Very important line, it disable the page refresh.
            return false;
          });
      });
    </script>

    <!-- templatemo 401 sprint -->
</body>
</html>
